{"version":3,"file":"index.umd.js","sources":["../src/agent/my-plugin.ts","../src/key-manager/key-management-system.ts","../src/key-manager/key-store.ts","../src/key-manager/secret-box.ts","../node_modules/daf-core/build/schemas/IIdentityManager.js","../node_modules/daf-identity-manager/build/identity-manager.js","../node_modules/daf-identity-manager/build/abstract-identity-provider.js","../node_modules/daf-identity-manager/build/abstract-identity-store.js","../node_modules/daf-identity-manager/build/index.js","../src/identity-manager/identity-provider.ts","../src/identity-manager/identity-store.ts"],"sourcesContent":["import { IAgentPlugin } from 'daf-core'\nimport { IMyAgentPlugin, IMyAgentPluginFooArgs, IContext } from '../types/IMyAgentPlugin'\n\nconst schema = { \n  components: { \n    schemas: {\n      IMyAgentPluginFooArgs: {\n        type: \"object\",\n        properties: {\n          did: {\n            type: \"string\",\n            description: \"Decentralized identifier\"\n          },\n          bar: {\n            type: \"string\",\n            description: \"bar\"\n          },\n        }\n      }\n    }, \n    methods: {\n      myPluginFoo: {\n        description: \"Does foo\",\n        arguments: {\n          \"$ref\": \"#/components/schemas/IMyAgentPluginFooArgs\"\n        },\n        returnType: {\n          type: \"string\"\n        }\n      }\n    } \n  }\n}\n\nexport class MyAgentPlugin implements IAgentPlugin {\n  \n  readonly schema = schema\n  \n  readonly methods: IMyAgentPlugin = {\n    myPluginFoo: this.myPluginFoo.bind(this)\n  }\n\n  private async myPluginFoo(args: IMyAgentPluginFooArgs, context: IContext): Promise<string> {\n    const didDoc = await context.agent.resolveDid({ didUrl: args.did })\n    console.log(didDoc)\n    return args.bar\n  }\n}","import { TKeyType, IKey, EcdsaSignature } from 'daf-core'\nimport { AbstractKeyManagementSystem } from 'daf-key-manager'\n\nexport class KeyManagementSystem extends AbstractKeyManagementSystem {\n\n  async createKey({ type }: { type: TKeyType }): Promise<Omit<IKey, 'kms'>> {\n    let key: Omit<IKey, 'kms'>\n\n    switch (type) {\n      case 'Ed25519':\n        throw Error('KeyManagementSystem createKey Ed25519 not implemented')\n        break\n      case 'Secp256k1':\n        throw Error('KeyManagementSystem createKey Secp256k1 not implemented')\n        break\n      default:\n        throw Error('Key type not supported: ' + type)\n    }\n\n    return key\n  }\n\n  async deleteKey(args: { kid: string }) {\n    throw Error('KeyManagementSystem deleteKey not implemented')\n    return true\n  }\n\n  async encryptJWE({ key, to, data }: { key: IKey; to: IKey; data: string }): Promise<string> {\n    throw Error('KeyManagementSystem encryptJWE not implemented')\n  }\n\n  async decryptJWE({ key, data }: { key: IKey; data: string }): Promise<string> {\n    throw Error('KeyManagementSystem decryptJWE not implemented')\n  }\n\n  async signEthTX({ key, transaction }: { key: IKey; transaction: object }): Promise<string> {\n    throw Error('KeyManagementSystem signEthTX not implemented')\n  }\n\n  async signJWT({ key, data }: { key: IKey; data: string }): Promise<EcdsaSignature> {\n    throw Error('KeyManagementSystem signJWT not implemented')\n  }\n}\n","import { IKey } from 'daf-core'\nimport { AbstractKeyStore } from 'daf-key-manager'\n\nexport class KeyStore extends AbstractKeyStore {\n  async get({ kid }: { kid: string }): Promise<IKey> {\n    throw Error('KeyStore get not implemented')\n  }\n\n  async delete({ kid }: { kid: string }) {\n    throw Error('KeyStore delete not implemented')\n    return true\n  }\n\n  async import(args: IKey) {\n    throw Error('KeyStore import not implemented')\n    return true\n  }\n}\n","import { AbstractSecretBox } from 'daf-key-manager'\n\nexport class SecretBox extends AbstractSecretBox {\n  constructor(private secretKey: string) {\n    super()\n    if (!secretKey) {\n      throw Error('Secret key is required')\n    }\n  }\n\n  async encrypt(message: string): Promise<string> {\n    throw Error('SecretBox encrypt not implemented')\n  }\n\n  async decrypt(encryptedMessageHex: string): Promise<string> {\n    throw Error('SecretBox decrypt not implemented')\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    \"components\": {\n        \"schemas\": {\n            \"IIdentityManagerAddKeyArgs\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"did\": {\n                        \"type\": \"string\",\n                        \"description\": \"DID\"\n                    },\n                    \"key\": {\n                        \"$ref\": \"#/components/schemas/IKey\",\n                        \"description\": \"Key object\"\n                    },\n                    \"options\": {\n                        \"type\": \"object\",\n                        \"description\": \"Optional. Identity provider specific options\"\n                    }\n                },\n                \"required\": [\n                    \"did\",\n                    \"key\"\n                ],\n                \"description\": \"Input arguments for {@link IIdentityManager.identityManagerAddKey | identityManagerAddKey}\"\n            },\n            \"IKey\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"kid\": {\n                        \"type\": \"string\",\n                        \"description\": \"Key ID\"\n                    },\n                    \"kms\": {\n                        \"type\": \"string\",\n                        \"description\": \"Key Management System\"\n                    },\n                    \"type\": {\n                        \"$ref\": \"#/components/schemas/TKeyType\",\n                        \"description\": \"Key type\"\n                    },\n                    \"publicKeyHex\": {\n                        \"type\": \"string\",\n                        \"description\": \"Public key\"\n                    },\n                    \"privateKeyHex\": {\n                        \"type\": \"string\",\n                        \"description\": \"Optional. Private key\"\n                    },\n                    \"meta\": {\n                        \"anyOf\": [\n                            {\n                                \"type\": \"object\"\n                            },\n                            {\n                                \"type\": \"null\"\n                            }\n                        ],\n                        \"description\": \"Optional. Key metadata. Can be used to store auth data to access remote kms\"\n                    }\n                },\n                \"required\": [\n                    \"kid\",\n                    \"kms\",\n                    \"type\",\n                    \"publicKeyHex\"\n                ],\n                \"description\": \"Cryptographic key\"\n            },\n            \"TKeyType\": {\n                \"type\": \"string\",\n                \"enum\": [\n                    \"Ed25519\",\n                    \"Secp256k1\"\n                ],\n                \"description\": \"Cryptographic key type\"\n            },\n            \"IIdentityManagerAddServiceArgs\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"did\": {\n                        \"type\": \"string\",\n                        \"description\": \"DID\"\n                    },\n                    \"service\": {\n                        \"$ref\": \"#/components/schemas/IService\",\n                        \"description\": \"Service object\"\n                    },\n                    \"options\": {\n                        \"type\": \"object\",\n                        \"description\": \"Optional. Identity provider specific options\"\n                    }\n                },\n                \"required\": [\n                    \"did\",\n                    \"service\"\n                ],\n                \"description\": \"Input arguments for {@link IIdentityManager.identityManagerAddService | identityManagerAddService}\"\n            },\n            \"IService\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"id\": {\n                        \"type\": \"string\",\n                        \"description\": \"ID\"\n                    },\n                    \"type\": {\n                        \"type\": \"string\",\n                        \"description\": \"Service type\"\n                    },\n                    \"serviceEndpoint\": {\n                        \"type\": \"string\",\n                        \"description\": \"Endpoint URL\"\n                    },\n                    \"description\": {\n                        \"type\": \"string\",\n                        \"description\": \"Optional. Description\"\n                    }\n                },\n                \"required\": [\n                    \"id\",\n                    \"type\",\n                    \"serviceEndpoint\"\n                ],\n                \"description\": \"Identity service\"\n            },\n            \"IIdentityManagerCreateIdentityArgs\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"alias\": {\n                        \"type\": \"string\",\n                        \"description\": \"Optional. Identity alias. Can be used to reference an object in an external system\"\n                    },\n                    \"provider\": {\n                        \"type\": \"string\",\n                        \"description\": \"Optional. Identity provider\"\n                    },\n                    \"kms\": {\n                        \"type\": \"string\",\n                        \"description\": \"Optional. Key Management System\"\n                    },\n                    \"options\": {\n                        \"type\": \"object\",\n                        \"description\": \"Optional. Identity provider specific options\"\n                    }\n                },\n                \"description\": \"Input arguments for {@link IIdentityManager.identityManagerCreateIdentity | identityManagerCreateIdentity}\"\n            },\n            \"IIdentity\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"did\": {\n                        \"type\": \"string\",\n                        \"description\": \"Decentralized identifier\"\n                    },\n                    \"alias\": {\n                        \"type\": \"string\",\n                        \"description\": \"Optional. Identity alias. Can be used to reference an object in an external system\"\n                    },\n                    \"provider\": {\n                        \"type\": \"string\",\n                        \"description\": \"Identity provider name\"\n                    },\n                    \"controllerKeyId\": {\n                        \"type\": \"string\",\n                        \"description\": \"Controller key id\"\n                    },\n                    \"keys\": {\n                        \"type\": \"array\",\n                        \"items\": {\n                            \"$ref\": \"#/components/schemas/IKey\"\n                        },\n                        \"description\": \"Array of managed keys\"\n                    },\n                    \"services\": {\n                        \"type\": \"array\",\n                        \"items\": {\n                            \"$ref\": \"#/components/schemas/IService\"\n                        },\n                        \"description\": \"Array of services\"\n                    }\n                },\n                \"required\": [\n                    \"did\",\n                    \"provider\",\n                    \"keys\",\n                    \"services\"\n                ],\n                \"description\": \"Identity interface\"\n            },\n            \"IIdentityManagerDeleteIdentityArgs\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"did\": {\n                        \"type\": \"string\",\n                        \"description\": \"DID\"\n                    }\n                },\n                \"required\": [\n                    \"did\"\n                ],\n                \"description\": \"Input arguments for {@link IIdentityManager.identityManagerDeleteIdentity | identityManagerDeleteIdentity}\"\n            },\n            \"IIdentityManagerGetIdentitiesArgs\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"alias\": {\n                        \"type\": \"string\",\n                        \"description\": \"Optional. Alias\"\n                    },\n                    \"provider\": {\n                        \"type\": \"string\",\n                        \"description\": \"Optional. Provider\"\n                    }\n                },\n                \"description\": \"Input arguments for {@link IIdentityManager.identityManagerGetIdentities | identityManagerGetIdentities}\"\n            },\n            \"IIdentityManagerGetIdentityArgs\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"did\": {\n                        \"type\": \"string\",\n                        \"description\": \"DID\"\n                    }\n                },\n                \"required\": [\n                    \"did\"\n                ],\n                \"description\": \"Input arguments for {@link IIdentityManager.identityManagerGetIdentity | identityManagerGetIdentity}\"\n            },\n            \"IIdentityManagerGetIdentityByAliasArgs\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"alias\": {\n                        \"type\": \"string\",\n                        \"description\": \"Alias\"\n                    },\n                    \"provider\": {\n                        \"type\": \"string\",\n                        \"description\": \"Optional provider\"\n                    }\n                },\n                \"required\": [\n                    \"alias\"\n                ],\n                \"description\": \"Input arguments for {@link IIdentityManager.identityManagerGetIdentityByAlias | identityManagerGetIdentityByAlias}\"\n            },\n            \"IIdentityManagerGetOrCreateIdentityArgs\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"alias\": {\n                        \"type\": \"string\",\n                        \"description\": \"Identity alias. Can be used to reference an object in an external system\"\n                    },\n                    \"provider\": {\n                        \"type\": \"string\",\n                        \"description\": \"Optional. Identity provider\"\n                    },\n                    \"kms\": {\n                        \"type\": \"string\",\n                        \"description\": \"Optional. Key Management System\"\n                    },\n                    \"options\": {\n                        \"type\": \"object\",\n                        \"description\": \"Optional. Identity provider specific options\"\n                    }\n                },\n                \"required\": [\n                    \"alias\"\n                ],\n                \"description\": \"Input arguments for {@link IIdentityManager.identityManagerGetOrCreateIdentity | identityManagerGetOrCreateIdentity}\"\n            },\n            \"IIdentityManagerRemoveKeyArgs\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"did\": {\n                        \"type\": \"string\",\n                        \"description\": \"DID\"\n                    },\n                    \"kid\": {\n                        \"type\": \"string\",\n                        \"description\": \"Key ID\"\n                    },\n                    \"options\": {\n                        \"type\": \"object\",\n                        \"description\": \"Optional. Identity provider specific options\"\n                    }\n                },\n                \"required\": [\n                    \"did\",\n                    \"kid\"\n                ],\n                \"description\": \"Input arguments for {@link IIdentityManager.identityManagerRemoveKey | identityManagerRemoveKey}\"\n            },\n            \"IIdentityManagerRemoveServiceArgs\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"did\": {\n                        \"type\": \"string\",\n                        \"description\": \"DID\"\n                    },\n                    \"id\": {\n                        \"type\": \"string\",\n                        \"description\": \"Service ID\"\n                    },\n                    \"options\": {\n                        \"type\": \"object\",\n                        \"description\": \"Optional. Identity provider specific options\"\n                    }\n                },\n                \"required\": [\n                    \"did\",\n                    \"id\"\n                ],\n                \"description\": \"Input arguments for {@link IIdentityManager.identityManagerRemoveService | identityManagerRemoveService}\"\n            },\n            \"IIdentityManagerSetAliasArgs\": {\n                \"type\": \"object\",\n                \"properties\": {\n                    \"did\": {\n                        \"type\": \"string\",\n                        \"description\": \"Required. DID\"\n                    },\n                    \"alias\": {\n                        \"type\": \"string\",\n                        \"description\": \"Required. Identity alias\"\n                    }\n                },\n                \"required\": [\n                    \"did\",\n                    \"alias\"\n                ],\n                \"description\": \"Input arguments for {@link IIdentityManager.identityManagerSetAlias | identityManagerSetAlias}\"\n            }\n        },\n        \"methods\": {\n            \"identityManagerAddKey\": {\n                \"description\": \"Adds a key to a DID Document\",\n                \"arguments\": {\n                    \"$ref\": \"#/components/schemas/IIdentityManagerAddKeyArgs\"\n                },\n                \"returnType\": {\n                    \"type\": \"object\"\n                }\n            },\n            \"identityManagerAddService\": {\n                \"description\": \"Adds a service to a DID Document\",\n                \"arguments\": {\n                    \"$ref\": \"#/components/schemas/IIdentityManagerAddServiceArgs\"\n                },\n                \"returnType\": {\n                    \"type\": \"object\"\n                }\n            },\n            \"identityManagerCreateIdentity\": {\n                \"description\": \"Creates and returns a new identity\",\n                \"arguments\": {\n                    \"$ref\": \"#/components/schemas/IIdentityManagerCreateIdentityArgs\"\n                },\n                \"returnType\": {\n                    \"$ref\": \"#/components/schemas/IIdentity\"\n                }\n            },\n            \"identityManagerDeleteIdentity\": {\n                \"description\": \"Deletes identity\",\n                \"arguments\": {\n                    \"$ref\": \"#/components/schemas/IIdentityManagerDeleteIdentityArgs\"\n                },\n                \"returnType\": {\n                    \"type\": \"boolean\"\n                }\n            },\n            \"identityManagerGetIdentities\": {\n                \"description\": \"Returns a list of managed identities\",\n                \"arguments\": {\n                    \"$ref\": \"#/components/schemas/IIdentityManagerGetIdentitiesArgs\"\n                },\n                \"returnType\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"$ref\": \"#/components/schemas/IIdentity\"\n                    }\n                }\n            },\n            \"identityManagerGetIdentity\": {\n                \"description\": \"Returns a specific identity\",\n                \"arguments\": {\n                    \"$ref\": \"#/components/schemas/IIdentityManagerGetIdentityArgs\"\n                },\n                \"returnType\": {\n                    \"$ref\": \"#/components/schemas/IIdentity\"\n                }\n            },\n            \"identityManagerGetIdentityByAlias\": {\n                \"description\": \"Returns a specific identity by alias\",\n                \"arguments\": {\n                    \"$ref\": \"#/components/schemas/IIdentityManagerGetIdentityByAliasArgs\"\n                },\n                \"returnType\": {\n                    \"$ref\": \"#/components/schemas/IIdentity\"\n                }\n            },\n            \"identityManagerGetOrCreateIdentity\": {\n                \"description\": \"Returns an existing identity or creates a new one for a specific alias\",\n                \"arguments\": {\n                    \"$ref\": \"#/components/schemas/IIdentityManagerGetOrCreateIdentityArgs\"\n                },\n                \"returnType\": {\n                    \"$ref\": \"#/components/schemas/IIdentity\"\n                }\n            },\n            \"identityManagerGetProviders\": {\n                \"description\": \"Returns a list of available identity providers\",\n                \"arguments\": {\n                    \"type\": \"object\"\n                },\n                \"returnType\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\n                    }\n                }\n            },\n            \"identityManagerImportIdentity\": {\n                \"description\": \"Imports identity\",\n                \"arguments\": {\n                    \"$ref\": \"#/components/schemas/IIdentity\"\n                },\n                \"returnType\": {\n                    \"$ref\": \"#/components/schemas/IIdentity\"\n                }\n            },\n            \"identityManagerRemoveKey\": {\n                \"description\": \"Removes a key from a DID Document\",\n                \"arguments\": {\n                    \"$ref\": \"#/components/schemas/IIdentityManagerRemoveKeyArgs\"\n                },\n                \"returnType\": {\n                    \"type\": \"object\"\n                }\n            },\n            \"identityManagerRemoveService\": {\n                \"description\": \"Removes a service from a DID Document\",\n                \"arguments\": {\n                    \"$ref\": \"#/components/schemas/IIdentityManagerRemoveServiceArgs\"\n                },\n                \"returnType\": {\n                    \"type\": \"object\"\n                }\n            },\n            \"identityManagerSetAlias\": {\n                \"description\": \"Sets identity alias\",\n                \"arguments\": {\n                    \"$ref\": \"#/components/schemas/IIdentityManagerSetAliasArgs\"\n                },\n                \"returnType\": {\n                    \"type\": \"boolean\"\n                }\n            }\n        }\n    }\n};\n//# sourceMappingURL=IIdentityManager.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IdentityManager = void 0;\nvar IIdentityManager_1 = __importDefault(require(\"daf-core/build/schemas/IIdentityManager\"));\n/**\n * Agent plugin that implements {@link daf-core#IIdentityManager} interface\n * @public\n */\nvar IdentityManager = /** @class */ (function () {\n    function IdentityManager(options) {\n        this.schema = IIdentityManager_1.default;\n        this.providers = options.providers;\n        this.defaultProvider = options.defaultProvider;\n        this.store = options.store;\n        this.methods = {\n            identityManagerGetProviders: this.identityManagerGetProviders.bind(this),\n            identityManagerGetIdentities: this.identityManagerGetIdentities.bind(this),\n            identityManagerGetIdentity: this.identityManagerGetIdentity.bind(this),\n            identityManagerGetIdentityByAlias: this.identityManagerGetIdentityByAlias.bind(this),\n            identityManagerCreateIdentity: this.identityManagerCreateIdentity.bind(this),\n            identityManagerSetAlias: this.identityManagerSetAlias.bind(this),\n            identityManagerGetOrCreateIdentity: this.identityManagerGetOrCreateIdentity.bind(this),\n            identityManagerImportIdentity: this.identityManagerImportIdentity.bind(this),\n            identityManagerDeleteIdentity: this.identityManagerDeleteIdentity.bind(this),\n            identityManagerAddKey: this.identityManagerAddKey.bind(this),\n            identityManagerRemoveKey: this.identityManagerRemoveKey.bind(this),\n            identityManagerAddService: this.identityManagerAddService.bind(this),\n            identityManagerRemoveService: this.identityManagerRemoveService.bind(this),\n        };\n    }\n    IdentityManager.prototype.getProvider = function (name) {\n        var provider = this.providers[name];\n        if (!provider)\n            throw Error('Identity provider does not exist: ' + name);\n        return provider;\n    };\n    /** {@inheritDoc daf-core#IIdentityManager.identityManagerGetProviders} */\n    IdentityManager.prototype.identityManagerGetProviders = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, Object.keys(this.providers)];\n            });\n        });\n    };\n    /** {@inheritDoc daf-core#IIdentityManager.identityManagerGetIdentities} */\n    IdentityManager.prototype.identityManagerGetIdentities = function (args) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.store.list(args)];\n            });\n        });\n    };\n    /** {@inheritDoc daf-core#IIdentityManager.identityManagerGetIdentity} */\n    IdentityManager.prototype.identityManagerGetIdentity = function (_a) {\n        var did = _a.did;\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_b) {\n                return [2 /*return*/, this.store.get({ did: did })];\n            });\n        });\n    };\n    /** {@inheritDoc daf-core#IIdentityManager.identityManagerGetIdentityByAlias} */\n    IdentityManager.prototype.identityManagerGetIdentityByAlias = function (_a) {\n        var alias = _a.alias, provider = _a.provider;\n        return __awaiter(this, void 0, void 0, function () {\n            var providerName;\n            return __generator(this, function (_b) {\n                providerName = provider || this.defaultProvider;\n                return [2 /*return*/, this.store.get({ alias: alias, provider: providerName })];\n            });\n        });\n    };\n    /** {@inheritDoc daf-core#IIdentityManager.identityManagerCreateIdentity} */\n    IdentityManager.prototype.identityManagerCreateIdentity = function (args, context) {\n        return __awaiter(this, void 0, void 0, function () {\n            var providerName, existingIdentity, e_1, identityProvider, partialIdentity, identity;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        providerName = (args === null || args === void 0 ? void 0 : args.provider) || this.defaultProvider;\n                        if (!((args === null || args === void 0 ? void 0 : args.alias) !== undefined)) return [3 /*break*/, 5];\n                        existingIdentity = void 0;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.store.get({ alias: args.alias, provider: providerName })];\n                    case 2:\n                        existingIdentity = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 4:\n                        if (existingIdentity) {\n                            throw Error(\"Identity with alias: \" + args.alias + \", provider: \" + providerName + \" already exists\");\n                        }\n                        _a.label = 5;\n                    case 5:\n                        identityProvider = this.getProvider(providerName);\n                        return [4 /*yield*/, identityProvider.createIdentity({ kms: args === null || args === void 0 ? void 0 : args.kms, alias: args === null || args === void 0 ? void 0 : args.alias, options: args === null || args === void 0 ? void 0 : args.options }, context)];\n                    case 6:\n                        partialIdentity = _a.sent();\n                        identity = __assign(__assign({}, partialIdentity), { provider: providerName });\n                        if (args === null || args === void 0 ? void 0 : args.alias) {\n                            identity.alias = args.alias;\n                        }\n                        return [4 /*yield*/, this.store.import(identity)];\n                    case 7:\n                        _a.sent();\n                        return [2 /*return*/, identity];\n                }\n            });\n        });\n    };\n    /** {@inheritDoc daf-core#IIdentityManager.identityManagerGetOrCreateIdentity} */\n    IdentityManager.prototype.identityManagerGetOrCreateIdentity = function (_a, context) {\n        var provider = _a.provider, alias = _a.alias, kms = _a.kms, options = _a.options;\n        return __awaiter(this, void 0, void 0, function () {\n            var providerName, identity, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        _c.trys.push([0, 2, , 3]);\n                        providerName = provider || this.defaultProvider;\n                        return [4 /*yield*/, this.store.get({ alias: alias, provider: providerName })];\n                    case 1:\n                        identity = _c.sent();\n                        return [2 /*return*/, identity];\n                    case 2:\n                        _b = _c.sent();\n                        return [2 /*return*/, this.identityManagerCreateIdentity({ provider: provider, alias: alias, kms: kms, options: options }, context)];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /** {@inheritDoc daf-core#IIdentityManager.identityManagerSetAlias} */\n    IdentityManager.prototype.identityManagerSetAlias = function (_a, context) {\n        var did = _a.did, alias = _a.alias;\n        return __awaiter(this, void 0, void 0, function () {\n            var identity;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.store.get({ did: did })];\n                    case 1:\n                        identity = _b.sent();\n                        identity.alias = alias;\n                        return [4 /*yield*/, this.store.import(identity)];\n                    case 2: return [2 /*return*/, _b.sent()];\n                }\n            });\n        });\n    };\n    /** {@inheritDoc daf-core#IIdentityManager.identityManagerImportIdentity} */\n    IdentityManager.prototype.identityManagerImportIdentity = function (identity, context) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, _b, key, e_2_1;\n            var e_2, _c;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        _d.trys.push([0, 5, 6, 7]);\n                        _a = __values(identity.keys), _b = _a.next();\n                        _d.label = 1;\n                    case 1:\n                        if (!!_b.done) return [3 /*break*/, 4];\n                        key = _b.value;\n                        return [4 /*yield*/, context.agent.keyManagerImportKey(key)];\n                    case 2:\n                        _d.sent();\n                        _d.label = 3;\n                    case 3:\n                        _b = _a.next();\n                        return [3 /*break*/, 1];\n                    case 4: return [3 /*break*/, 7];\n                    case 5:\n                        e_2_1 = _d.sent();\n                        e_2 = { error: e_2_1 };\n                        return [3 /*break*/, 7];\n                    case 6:\n                        try {\n                            if (_b && !_b.done && (_c = _a.return)) _c.call(_a);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                        return [7 /*endfinally*/];\n                    case 7: return [4 /*yield*/, this.store.import(identity)];\n                    case 8:\n                        _d.sent();\n                        return [2 /*return*/, identity];\n                }\n            });\n        });\n    };\n    /** {@inheritDoc daf-core#IIdentityManager.identityManagerDeleteIdentity} */\n    IdentityManager.prototype.identityManagerDeleteIdentity = function (_a, context) {\n        var did = _a.did;\n        return __awaiter(this, void 0, void 0, function () {\n            var identity, provider;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.store.get({ did: did })];\n                    case 1:\n                        identity = _b.sent();\n                        provider = this.getProvider(identity.provider);\n                        return [4 /*yield*/, provider.deleteIdentity(identity, context)];\n                    case 2:\n                        _b.sent();\n                        if (!(identity.services.length > 0)) return [3 /*break*/, 4];\n                        identity.services = [];\n                        return [4 /*yield*/, this.store.import(identity)];\n                    case 3:\n                        _b.sent();\n                        _b.label = 4;\n                    case 4: return [2 /*return*/, this.store.delete({ did: did })];\n                }\n            });\n        });\n    };\n    /** {@inheritDoc daf-core#IIdentityManager.identityManagerAddKey} */\n    IdentityManager.prototype.identityManagerAddKey = function (_a, context) {\n        var did = _a.did, key = _a.key, options = _a.options;\n        return __awaiter(this, void 0, void 0, function () {\n            var identity, provider, result;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.store.get({ did: did })];\n                    case 1:\n                        identity = _b.sent();\n                        provider = this.getProvider(identity.provider);\n                        return [4 /*yield*/, provider.addKey({ identity: identity, key: key, options: options }, context)];\n                    case 2:\n                        result = _b.sent();\n                        identity.keys.push(key);\n                        return [4 /*yield*/, this.store.import(identity)];\n                    case 3:\n                        _b.sent();\n                        return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    /** {@inheritDoc daf-core#IIdentityManager.identityManagerRemoveKey} */\n    IdentityManager.prototype.identityManagerRemoveKey = function (_a, context) {\n        var did = _a.did, kid = _a.kid, options = _a.options;\n        return __awaiter(this, void 0, void 0, function () {\n            var identity, provider, result;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.store.get({ did: did })];\n                    case 1:\n                        identity = _b.sent();\n                        provider = this.getProvider(identity.provider);\n                        return [4 /*yield*/, provider.removeKey({ identity: identity, kid: kid, options: options }, context)];\n                    case 2:\n                        result = _b.sent();\n                        identity.keys = identity.keys.filter(function (k) { return k.kid !== kid; });\n                        return [4 /*yield*/, this.store.import(identity)];\n                    case 3:\n                        _b.sent();\n                        return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    /** {@inheritDoc daf-core#IIdentityManager.identityManagerAddService} */\n    IdentityManager.prototype.identityManagerAddService = function (_a, context) {\n        var did = _a.did, service = _a.service, options = _a.options;\n        return __awaiter(this, void 0, void 0, function () {\n            var identity, provider, result;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.store.get({ did: did })];\n                    case 1:\n                        identity = _b.sent();\n                        provider = this.getProvider(identity.provider);\n                        return [4 /*yield*/, provider.addService({ identity: identity, service: service, options: options }, context)];\n                    case 2:\n                        result = _b.sent();\n                        identity.services.push(service);\n                        return [4 /*yield*/, this.store.import(identity)];\n                    case 3:\n                        _b.sent();\n                        return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    /** {@inheritDoc daf-core#IIdentityManager.identityManagerRemoveService} */\n    IdentityManager.prototype.identityManagerRemoveService = function (_a, context) {\n        var did = _a.did, id = _a.id, options = _a.options;\n        return __awaiter(this, void 0, void 0, function () {\n            var identity, provider, result;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0: return [4 /*yield*/, this.store.get({ did: did })];\n                    case 1:\n                        identity = _b.sent();\n                        provider = this.getProvider(identity.provider);\n                        return [4 /*yield*/, provider.removeService({ identity: identity, id: id, options: options }, context)];\n                    case 2:\n                        result = _b.sent();\n                        identity.services = identity.services.filter(function (s) { return s.id !== id; });\n                        return [4 /*yield*/, this.store.import(identity)];\n                    case 3:\n                        _b.sent();\n                        return [2 /*return*/, result];\n                }\n            });\n        });\n    };\n    return IdentityManager;\n}());\nexports.IdentityManager = IdentityManager;\n//# sourceMappingURL=identity-manager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractIdentityProvider = void 0;\n/**\n * An abstract class for the {@link daf-identity-manager#IdentityManager} identity providers\n * @public\n */\nvar AbstractIdentityProvider = /** @class */ (function () {\n    function AbstractIdentityProvider() {\n    }\n    return AbstractIdentityProvider;\n}());\nexports.AbstractIdentityProvider = AbstractIdentityProvider;\n//# sourceMappingURL=abstract-identity-provider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractIdentityStore = void 0;\n/**\n * An abstract class for the {@link daf-identity-manager#IdentityManager} identity store\n * @public\n */\nvar AbstractIdentityStore = /** @class */ (function () {\n    function AbstractIdentityStore() {\n    }\n    return AbstractIdentityStore;\n}());\nexports.AbstractIdentityStore = AbstractIdentityStore;\n//# sourceMappingURL=abstract-identity-store.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractIdentityStore = exports.AbstractIdentityProvider = exports.IdentityManager = void 0;\n/**\n * Provides a {@link daf-identity-manager#IdentityManager | plugin} for the {@link daf-core#Agent} that implements {@link daf-core#IIdentityManager} interface\n *\n * @packageDocumentation\n */\nvar identity_manager_1 = require(\"./identity-manager\");\nObject.defineProperty(exports, \"IdentityManager\", { enumerable: true, get: function () { return identity_manager_1.IdentityManager; } });\nvar abstract_identity_provider_1 = require(\"./abstract-identity-provider\");\nObject.defineProperty(exports, \"AbstractIdentityProvider\", { enumerable: true, get: function () { return abstract_identity_provider_1.AbstractIdentityProvider; } });\nvar abstract_identity_store_1 = require(\"./abstract-identity-store\");\nObject.defineProperty(exports, \"AbstractIdentityStore\", { enumerable: true, get: function () { return abstract_identity_store_1.AbstractIdentityStore; } });\n//# sourceMappingURL=index.js.map","import { IIdentity, IKey, IService, IAgentContext, IKeyManager } from 'daf-core'\nimport { AbstractIdentityProvider } from 'daf-identity-manager'\n\ntype IContext = IAgentContext<IKeyManager>\n\nexport class IdentityProvider extends AbstractIdentityProvider {\n  private defaultKms: string\n\n  constructor(options: { defaultKms: string }) {\n    super()\n    this.defaultKms = options.defaultKms\n  }\n\n  async createIdentity(\n    { kms, alias }: { kms?: string; alias?: string },\n    context: IContext,\n  ): Promise<Omit<IIdentity, 'provider'>> {\n    throw Error('IdentityProvider createIdentity not implemented')\n  }\n\n  async deleteIdentity(identity: IIdentity, context: IContext): Promise<boolean> {\n    throw Error('IdentityProvider deleteIdentity not implemented')\n    return true\n  }\n\n  async addKey(\n    { identity, key, options }: { identity: IIdentity; key: IKey; options?: any },\n    context: IContext,\n  ): Promise<any> {\n    throw Error('IdentityProvider addKey not implemented')\n    return { success: true }\n  }\n\n  async addService(\n    { identity, service, options }: { identity: IIdentity; service: IService; options?: any },\n    context: IContext,\n  ): Promise<any> {\n    throw Error('IdentityProvider addService not implemented')\n    return { success: true }\n  }\n\n  async removeKey(\n    args: { identity: IIdentity; kid: string; options?: any },\n    context: IContext,\n  ): Promise<any> {\n    throw Error('IdentityProvider removeKey not implemented')\n    return { success: true }\n  }\n\n  async removeService(\n    args: { identity: IIdentity; id: string; options?: any },\n    context: IContext,\n  ): Promise<any> {\n    throw Error('IdentityProvider removeService not implemented')\n    return { success: true }\n  }\n}\n","import { IIdentity } from 'daf-core'\nimport { AbstractIdentityStore } from 'daf-identity-manager'\n\nexport class IdentityStore extends AbstractIdentityStore {\n  async get({ did, alias, provider }: { did: string; alias: string; provider: string }): Promise<IIdentity> {\n    throw Error('IdentityStore get not implemented')\n  }\n\n  async delete({ did }: { did: string }) {\n    throw Error('IdentityStore delete not implemented')\n    return true\n  }\n\n  async import(args: IIdentity) {\n    throw Error('IdentityStore import not implemented')\n    return true\n  }\n\n  async list(args: { alias?: string; provider?: string }): Promise<IIdentity[]> {\n    throw Error('IdentityStore list not implemented')\n  }\n}\n"],"names":["schema","components","schemas","IMyAgentPluginFooArgs","type","properties","did","description","bar","methods","myPluginFoo","arguments","$ref","returnType","MyAgentPlugin","this","bind","args","context","agent","resolveDid","didUrl","didDoc","console","log","KeyManagementSystem","createKey","Error","key","deleteKey","encryptJWE","decryptJWE","signEthTX","signJWT","AbstractKeyManagementSystem","KeyStore","get","AbstractKeyStore","SecretBox","secretKey","_this","encrypt","message","decrypt","encryptedMessageHex","AbstractSecretBox","Object","defineProperty","exports","value","IIdentityManagerAddKeyArgs","options","required","IKey","kid","kms","publicKeyHex","privateKeyHex","meta","anyOf","TKeyType","enum","IIdentityManagerAddServiceArgs","service","IService","id","serviceEndpoint","IIdentityManagerCreateIdentityArgs","alias","provider","IIdentity","controllerKeyId","keys","items","services","IIdentityManagerDeleteIdentityArgs","IIdentityManagerGetIdentitiesArgs","IIdentityManagerGetIdentityArgs","IIdentityManagerGetIdentityByAliasArgs","IIdentityManagerGetOrCreateIdentityArgs","IIdentityManagerRemoveKeyArgs","IIdentityManagerRemoveServiceArgs","IIdentityManagerSetAliasArgs","identityManagerAddKey","identityManagerAddService","identityManagerCreateIdentity","identityManagerDeleteIdentity","identityManagerGetIdentities","identityManagerGetIdentity","identityManagerGetIdentityByAlias","identityManagerGetOrCreateIdentity","identityManagerGetProviders","identityManagerImportIdentity","identityManagerRemoveKey","identityManagerRemoveService","identityManagerSetAlias","__assign","assign","t","s","i","n","length","p","prototype","hasOwnProperty","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__values","o","m","__importDefault","mod","__esModule","default","IIdentityManager_1","require$$0","IdentityManager","providers","defaultProvider","store","getProvider","name","_a","list","_b","providerName","existingIdentity","partialIdentity","identity","undefined","createIdentity","import","_c","e_2_1","e_2","_d","keyManagerImportKey","error","deleteIdentity","delete","addKey","removeKey","filter","k","addService","removeService","enumerable","identity_manager_1","abstract_identity_provider_1","AbstractIdentityProvider","abstract_identity_store_1","AbstractIdentityStore","IdentityProvider","defaultKms","IdentityStore"],"mappings":"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"}